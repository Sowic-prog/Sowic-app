import{a as ve,k as Ne,u as we,r,s as b,j as e,g as ye,X as Ie,P as Ce,h as Ee,R as ke,A as Ae}from"./index-DOan4Mna.js";import{A as Se}from"./AssetImportModal-BwZNqDyz.js";import{A as g}from"./types-CD_RJx0M.js";import{C as z}from"./chevron-left-dnm8qLMD.js";import{C as V}from"./camera-Byqxqcam.js";import{T as _e}from"./tag-TpK3k34T.js";import{Q as De}from"./qr-code-BCTfoJwI.js";import{M as k}from"./map-pin-B9vmRWEB.js";import{C as Pe}from"./circle-user-round-DyE1s1ny.js";import{S as Fe}from"./save-CT3IA3EO.js";import{P as ze}from"./pen-line-BCyyQQOY.js";import{P as Le}from"./printer-Cl0KKCNx.js";import{S as Oe}from"./search-CPhyDFuk.js";import{C as Te}from"./chevron-right-CYe8aAd4.js";import"./triangle-alert-Cdjg_spt.js";import"./upload-BG14C8-b.js";import"./loader-circle-DWsTb9p_.js";const G=s=>({...s,id:s.id,internalId:s.internal_id||"",barcodeId:s.barcode_id||"",name:s.name||"",brand:s.brand||"",model:s.model||"",serial:s.serial||"",location:s.location||"",responsible:s.assigned_to||"",ownership:s.ownership||"",status:s.status||"Operativo",image:s.image||"https://images.unsplash.com/photo-1592078615290-033ee584e267?auto=format&fit=crop&q=80&w=400",expirations:s.expirations||[],incidents:s.incidents||[],year:s.created_at?new Date(s.created_at).getFullYear():new Date().getFullYear(),hours:0,dailyRate:0,value:parseFloat(s.value)||0,functionalDescription:s.functional_description||"",complementaryDescription:s.complementary_description||""}),Re=s=>({id:s.id,mockId:s.mock_id,title:s.title,description:s.description,assetId:s.asset_id,assetName:s.asset_name,internalId:s.internal_id,type:s.type,priority:s.priority,status:s.status,dateStart:s.date_start,dateEnd:s.date_end,responsible:s.responsible,isOutsourced:s.is_outsourced,provider:s.provider,updates:s.updates||[],expenses:s.expenses||[],checklists:s.checklists||[],environmentalNotes:s.environmental_notes,environmentalTips:s.environmental_tips,checklistIA:s.checklist_ia||[],project_id:s.project_id,maintenancePlanId:s.maintenance_plan_id,maintenanceEventId:s.maintenance_event_id,closingData:s.closing_data}),Y=s=>({internal_id:s.internalId,barcode_id:s.barcodeId,name:s.name,brand:s.brand,model:s.model,serial:s.serial,image:s.image,status:s.status,location:s.location,assigned_to:s.responsible,description:s.description,ownership:s.ownership,type:"Mobiliario",functional_description:s.functionalDescription}),Me=s=>({...s,id:s.id,name:s.name,location:s.location||"Ubicación Desconocida",status:s.status||"Activa",internalId:s.internal_id,assignedAssets:s.assigned_assets_count||0,assignedStaff:s.assigned_staff_count||0,responsible:s.responsible||"Sin Asignar"}),qe=s=>({...s,id:s.id,name:s.name,role:s.role||"Colaborador",status:s.status||"Activo",location:s.location||"Base",avatar:s.avatar||"https://images.unsplash.com/photo-1599566150163-29194dcaad36?w=400&q=80",assignedAssets:[],email:s.email,phone:s.phone,dni:s.dni}),Be=ke.memo(({asset:s,onClick:A,getStatusColor:j})=>e.jsxs("div",{onClick:()=>A(s),className:"bg-white p-4 rounded-3xl border border-slate-50 shadow-sm flex items-center gap-4 cursor-pointer active:scale-[0.98] transition-transform relative overflow-hidden group optimize-visibility",children:[e.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1.5 ${j(s.status)}`}),e.jsxs("div",{className:"w-20 h-20 bg-slate-100 rounded-2xl overflow-hidden shrink-0 border border-slate-100 relative",children:[e.jsx("img",{src:s.image,alt:s.name,loading:"lazy",className:"w-full h-full object-cover"}),s.responsible&&e.jsx("div",{className:"absolute bottom-0 right-0 left-0 bg-black/50 backdrop-blur-[2px] p-1 text-center",children:e.jsx("span",{className:"text-[8px] text-white font-bold truncate block",children:s.responsible})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:s.internalId}),s.barcodeId&&e.jsx("span",{className:"text-[9px] font-bold text-slate-500 font-mono",children:s.barcodeId})]}),s.ownership==="Alquilado"&&e.jsx("span",{className:"text-[9px] font-bold bg-blue-50 text-blue-600 px-2 py-0.5 rounded border border-blue-100",children:"RENT"})]}),e.jsx("h3",{className:"font-bold text-slate-800 text-sm truncate pr-2 leading-tight",children:s.name}),e.jsx("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:e.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-slate-500 bg-slate-50 px-2 py-1 rounded-lg border border-slate-100",children:[e.jsx(k,{size:10,className:"text-orange-500"}),e.jsx("span",{className:"truncate max-w-[100px]",children:s.location})]})})]}),e.jsx(Te,{size:20,className:"text-slate-300 group-hover:text-orange-500 transition-colors"})]})),Ct=()=>{var $;const{user:s,checkPermission:A}=ve(),j=(($=s==null?void 0:s.auth)==null?void 0:$.role)==="SuperAdmin",L=A("/assets","edit"),S=Ne(),Q=we(),[N,_]=r.useState([]),[We,X]=r.useState([]),[O,H]=r.useState([]),[J,T]=r.useState(!0),[Ue,K]=r.useState(null),[i,w]=r.useState(null),[$e,R]=r.useState(null),[D,P]=r.useState(!1),[y,I]=r.useState(!1),[Z,M]=r.useState(!1),[F,ee]=r.useState(""),[C,te]=r.useState("all"),[Ve,Ge]=r.useState(!1),[Ye,Qe]=r.useState(!1),[Xe,He]=r.useState(null),[Je,Ke]=r.useState({date:new Date().toISOString().split("T")[0],description:"",damageLevel:"Leve",cost:0,status:"Reportado",incidentNumber:"",reportUrl:""}),[c,m]=r.useState({}),[Ze,se]=r.useState({type:"ITV",expirationDate:"",notes:""}),[et,ae]=r.useState([]),[tt,re]=r.useState([]),[st,le]=r.useState([]),[at,ne]=r.useState(!1),[a,x]=r.useState({name:"",internalId:"",barcodeId:"",type:"Mobiliario",status:g.OPERATIONAL,ownership:"Propio",supplier:"",brand:"",model:"",serial:"",year:new Date().getFullYear(),location:"Pañol Central",responsible:"",image:"https://images.unsplash.com/photo-1592078615290-033ee584e267?auto=format&fit=crop&q=80&w=400",dailyRate:0,value:0,hours:0,domainNumber:"",incidents:[],functionalDescription:""}),[ie,oe]=r.useState([]),[rt,lt]=r.useState({type:"ITV",expirationDate:"",notes:""}),[nt,ce]=r.useState(!1),[it,de]=r.useState(!1),E=r.useRef(null);r.useRef(null);const q=r.useRef(null);r.useEffect(()=>{B(),pe(),me()},[]),r.useEffect(()=>{if(D){const t=a.functionalDescription||"",l=a.brand||"",n=a.model||"";let o=[];t&&o.push(t),l&&o.push(l),n&&o.push(n);const p=o.join(" ");p!==a.name&&x(u=>({...u,name:p}))}},[a.functionalDescription,a.brand,a.model,D]);const B=async()=>{T(!0);try{const{data:t,error:l}=await b.from("mobiliario").select("*").order("created_at",{ascending:!1});if(l)throw l;const n=new Date().toISOString().split("T")[0],{data:o,error:p}=await b.from("asset_allocations").select("*, projects(name)").lte("start_date",n).gte("end_date",n).eq("status","Activo");if(p&&console.error("Error fetching allocations:",p),t){const u=t.map(h=>{var f;const d=G(h),v=o==null?void 0:o.find(je=>je.asset_id===d.id);return v?{...d,location:((f=v.projects)==null?void 0:f.name)||d.location}:d});_(u)}}catch(t){console.error("Error fetching assets:",t),K("Error al cargar mobiliario: "+t.message)}finally{T(!1)}},pe=async()=>{try{const{data:t,error:l}=await b.from("projects").select("*");if(l)throw l;t&&X(t.map(Me))}catch(t){console.error("Error fetching projects:",t)}},me=async()=>{try{const{data:t,error:l}=await b.from("staff").select("*");if(l)throw l;t&&H(t.map(qe))}catch(t){console.error("Error fetching staff:",t)}};r.useEffect(()=>{const t=(i==null?void 0:i.id)||null,l=t!==q.current;if(l&&(ce(!1),ne(!1),de(!1),I(!1),q.current=t),i&&l){const n=async()=>{const{data:d}=await b.from("asset_allocations").select("*, projects(name)").eq("asset_id",i.id).eq("status","Programado").order("start_date",{ascending:!0}).limit(1).single();R(d||null)},o=async()=>{const{data:d}=await b.from("asset_documents").select("*").eq("asset_id",i.id).order("created_at",{ascending:!1});if(d){const v=d.map(f=>({id:f.id,assetId:f.asset_id,type:f.type,description:f.description,fileUrl:f.file_url,createdAt:f.created_at}));w(f=>f?{...f,documents:v}:null)}};n(),o();const p=async()=>{const{data:d}=await b.from("work_orders").select("*").eq("asset_id",i.id).order("created_at",{ascending:!1});d&&ae(d.map(Re))},u=async()=>{const{data:d}=await b.from("checklists").select("*").eq("asset_id",i.id).order("created_at",{ascending:!1});d&&re(d)},h=async()=>{const{data:d}=await b.from("maintenance_plans").select("*, maintenance_events(*)").eq("asset_id",i.id).order("created_at",{ascending:!1});d&&le(d.map(v=>({...v,events:v.maintenance_events||[]})))};p(),u(),h()}},[i]),r.useEffect(()=>{if(S.state&&N.length>0){const t=S.state;if(t.targetAssetId){const l=N.find(n=>n.id===t.targetAssetId);l&&w(l)}}},[S,N]);const W=N.filter(t=>{if(t.type!=="Mobiliario"||C==="owned"&&t.ownership!=="Propio"||C==="rented"&&t.ownership!=="Alquilado"||C==="leasing"&&t.ownership!=="Leasing")return!1;const l=F.toLowerCase().trim();return l?(t.name||"").toLowerCase().includes(l)||(t.internalId||"").toLowerCase().includes(l)||(t.serial||"").toLowerCase().includes(l)||(t.barcodeId||"").toLowerCase().includes(l):!0}).sort((t,l)=>{const n=F.toLowerCase().trim();if(!n)return 0;const o=(t.barcodeId||"").toLowerCase(),p=(l.barcodeId||"").toLowerCase(),u=(t.internalId||"").toLowerCase(),h=(l.internalId||"").toLowerCase();return o===n&&p!==n?-1:p===n&&o!==n?1:u===n&&h!==n?-1:h===n&&u!==n?1:o.startsWith(n)&&!p.startsWith(n)?-1:p.startsWith(n)&&!o.startsWith(n)?1:0}),xe=t=>{switch(t){case g.OPERATIONAL:return"bg-green-500";case g.IN_MAINTENANCE:return"bg-amber-500";case g.ON_SITE:return"bg-orange-500";case g.RETURNED:return"bg-slate-700";default:return"bg-slate-400"}},ue=()=>{window.print()},he=()=>{i&&(m({...i}),se({type:"ITV",expirationDate:"",notes:""}),I(!0))},fe=()=>{I(!1),m({})},be=async()=>{if(i&&c.name){if(c.ownership==="Propio"&&(!c.barcodeId||c.barcodeId.length!==4)){alert("El Código ID de 4 dígitos es obligatorio para activos propios.");return}try{const t={...i,...c},l=Y(t),{id:n,...o}=l,{error:p}=await b.from("mobiliario").update(o).eq("id",i.id);if(p)throw p;_(u=>u.map(h=>h.id===i.id?t:h)),w(t),I(!1),m({}),alert("Mobiliario actualizado correctamente.")}catch(t){console.error("Error updating asset:",t),alert("Error al actualizar mobiliario: "+t.message)}}else alert("El nombre es obligatorio.")},U=t=>{if(t.target.files&&t.target.files[0]){const l=new FileReader;l.onload=n=>{var o;(o=n.target)!=null&&o.result&&(y?m:x)(u=>{var h;return{...u,image:(h=n.target)==null?void 0:h.result}})},l.readAsDataURL(t.target.files[0])}},ge=async()=>{if(!a.name||!a.internalId){alert("Nombre e ID Interno son obligatorios.");return}if(a.ownership==="Propio"&&(!a.barcodeId||a.barcodeId.length!==4)){alert("El código de 4 dígitos es obligatorio para activos propios.");return}try{const t={...a,expirations:ie,description:a.functionalDescription||a.name||"",responsible:a.responsible||"Sin Asignar",incidents:[]},l=Y(t),{data:n,error:o}=await b.from("mobiliario").insert(l).select().single();if(o)throw o;if(n){const p=G(n);_([p,...N]),P(!1),x({name:"",internalId:"",barcodeId:"",type:"Mobiliario",status:g.OPERATIONAL,ownership:"Propio",brand:"",model:"",serial:"",location:"Pañol Central",image:"https://images.unsplash.com/photo-1592078615290-033ee584e267?auto=format&fit=crop&q=80&w=400",responsible:"",description:""}),oe([]),alert("Mobiliario creado exitosamente.")}}catch(t){console.error("Error creating asset:",t),alert("Error al crear mobiliario: "+t.message)}};return D?e.jsxs("div",{className:"bg-[#F8F9FA] min-h-screen pb-24 font-sans animate-in slide-in-from-right-5 duration-300",children:[e.jsxs("div",{className:"bg-white p-4 sticky top-0 z-20 shadow-sm flex items-center justify-between",children:[e.jsx("button",{onClick:()=>P(!1),className:"text-slate-600 p-2","aria-label":"Volver",children:e.jsx(z,{size:24})}),e.jsx("h1",{className:"font-bold text-lg text-slate-800 tracking-tight",children:"Mobiliario"}),e.jsx("button",{onClick:ge,className:"text-orange-500 font-bold text-sm bg-orange-50 px-3 py-1.5 rounded-full",children:"Guardar"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"relative h-56 rounded-[2.5rem] overflow-hidden bg-slate-200 group shadow-inner",children:[e.jsx("img",{src:a.image,alt:"Preview",className:"w-full h-full object-cover opacity-90"}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center bg-black/10 group-hover:bg-black/30 transition-colors",children:[e.jsx("button",{onClick:()=>{var t;return(t=E.current)==null?void 0:t.click()},className:"bg-white/90 backdrop-blur-sm p-4 rounded-full shadow-lg text-slate-600 hover:text-orange-500 transition-colors","aria-label":"Subir imagen",children:e.jsx(V,{size:28})}),e.jsx("input",{type:"file",ref:E,className:"hidden",accept:"image/*",onChange:U,"aria-label":"Subir archivo"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-sm border border-slate-100 space-y-4",children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-800 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(_e,{size:16,className:"text-orange-500"})," Identificación y Propiedad"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase ml-1",children:"Propiedad"}),e.jsxs("select",{value:a.ownership,onChange:t=>x({...a,ownership:t.target.value}),className:"w-full p-4 bg-slate-50 border-none rounded-2xl text-sm font-bold text-slate-800 appearance-none",children:[e.jsx("option",{value:"Propio",children:"Propio"}),e.jsx("option",{value:"Alquilado",children:"Alquilado"}),e.jsx("option",{value:"Leasing",children:"Leasing"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase ml-1",children:"Estado"}),e.jsx("select",{value:a.status,onChange:t=>x({...a,status:t.target.value}),className:"w-full p-4 bg-slate-50 border-none rounded-2xl text-sm font-medium",children:Object.values(g).map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase ml-1",children:"ID Interno"}),e.jsx("input",{type:"text",value:a.internalId,onChange:t=>x({...a,internalId:t.target.value}),className:"w-full p-4 bg-slate-50 border-none rounded-2xl text-sm font-bold text-slate-800 uppercase",placeholder:"Ej. MOB-001"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase ml-1",children:"Código ID (4 dígitos)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",maxLength:4,value:a.barcodeId,onChange:t=>x({...a,barcodeId:t.target.value.replace(/\D/g,"")}),className:"w-full p-4 pl-12 bg-slate-50 border-none rounded-2xl text-sm font-bold text-slate-800 tracking-widest placeholder:font-normal placeholder:tracking-normal",placeholder:"Ej. 1001"}),e.jsx(De,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase ml-1",children:"Nombre"}),e.jsx("input",{type:"text",value:a.name,onChange:t=>x({...a,name:t.target.value}),className:"w-full p-4 bg-slate-50 border-none rounded-2xl text-sm font-bold text-slate-800",placeholder:"Ej. Escritorio Ejecutivo"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-sm border border-slate-100 space-y-4",children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-800 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(k,{size:16,className:"text-orange-500"})," Ubicación y Responsable"]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase ml-1",children:"Ubicación Actual"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:a.location,onChange:t=>x({...a,location:t.target.value}),className:"w-full p-4 pl-12 bg-slate-50 border-none rounded-2xl text-sm font-medium",placeholder:"Ej. Oficina Administración"}),e.jsx(k,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase ml-1",children:"Responsable"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:a.responsible,onChange:t=>x({...a,responsible:t.target.value}),className:"w-full p-4 pl-12 bg-slate-50 border-none rounded-2xl text-sm font-medium appearance-none",children:[e.jsx("option",{value:"",children:"Seleccionar Responsable..."}),O.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))]}),e.jsx(Pe,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-sm border border-slate-100 space-y-4",children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-800 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(ye,{size:16,className:"text-orange-500"})," Detalle Descriptivo"]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase ml-1",children:"Descripción Funcional"}),e.jsx("input",{type:"text",value:a.functionalDescription||"",onChange:t=>x({...a,functionalDescription:t.target.value}),placeholder:"Ej. Escritorio en L",className:"w-full p-4 bg-slate-50 border-none rounded-2xl text-sm font-medium"})]}),e.jsx("textarea",{value:a.description||"",onChange:t=>x({...a,description:t.target.value}),className:"w-full p-4 bg-slate-50 border-none rounded-2xl text-sm font-medium h-32 resize-none",placeholder:"Descripción detallada..."})]})]})]}):i?e.jsxs("div",{className:"bg-[#F8F9FA] min-h-screen pb-24 font-sans animate-in slide-in-from-right-5 duration-300",children:[e.jsxs("div",{className:"print-header",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-xl flex items-center justify-center text-white font-bold",children:"SW"}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-lg text-slate-800 uppercase",children:"Ficha Técnica: Mobiliario"}),e.jsx("p",{className:"text-[10px] text-slate-400 uppercase font-bold tracking-widest",children:"SOWIC Asset Management"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] text-slate-400 uppercase",children:"Actualizado al"}),e.jsx("p",{className:"font-bold text-slate-800",children:new Date().toLocaleDateString()})]})]}),e.jsxs("div",{className:"bg-white p-4 sticky top-0 z-20 shadow-sm flex items-center justify-between no-print",children:[e.jsx("button",{onClick:()=>w(null),className:"text-slate-600 p-2","aria-label":"Volver",children:e.jsx(z,{size:24})}),e.jsx("h1",{className:"font-bold text-lg text-slate-800 tracking-tight",children:y?"Editar Mobiliario":"Detalle"}),e.jsx("div",{className:"flex gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:fe,className:"w-10 h-10 bg-slate-100 text-slate-500 rounded-full flex items-center justify-center","aria-label":"Cancelar",children:e.jsx(Ie,{size:20})}),e.jsx("button",{onClick:be,className:"w-10 h-10 bg-orange-500 text-white rounded-full flex items-center justify-center shadow-lg transform transition-transform active:scale-95","aria-label":"Guardar",children:e.jsx(Fe,{size:20})})]}):e.jsxs(e.Fragment,{children:[L&&e.jsx("button",{onClick:he,className:"w-10 h-10 bg-white border border-slate-200 text-slate-600 rounded-full flex items-center justify-center shadow-sm hover:text-orange-500 transition-colors","aria-label":"Editar",children:e.jsx(ze,{size:20})}),e.jsx("button",{onClick:ue,className:"w-10 h-10 bg-slate-800 text-white rounded-full flex items-center justify-center shadow-md active:scale-95 transition-transform","aria-label":"Imprimir",children:e.jsx(Le,{size:20})})]})})]}),e.jsx("div",{className:"p-6 space-y-6",children:y?e.jsxs("div",{className:"bg-white p-6 rounded-[2.5rem] shadow-sm border border-slate-100 space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"relative w-32 h-32 rounded-3xl overflow-hidden bg-slate-100 group",children:[e.jsx("img",{src:c.image,alt:"Asset",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:()=>{var t;return(t=E.current)==null?void 0:t.click()},children:e.jsx(V,{className:"text-white",size:24})}),e.jsx("input",{type:"file",ref:E,className:"hidden",accept:"image/*",onChange:U})]})}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase ml-1",children:"Nombre"}),e.jsx("input",{type:"text",value:c.name,onChange:t=>m({...c,name:t.target.value}),className:"w-full p-3 bg-slate-50 border-none rounded-xl text-lg font-bold text-slate-800"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase ml-1",children:"ID Interno"}),e.jsx("input",{type:"text",value:c.internalId,onChange:t=>m({...c,internalId:t.target.value}),className:`w-full p-3 bg-slate-50 border-none rounded-xl text-sm font-bold text-slate-800 uppercase ${j?"":"opacity-50 cursor-not-allowed"}`,disabled:!j,"aria-label":"ID Interno"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase ml-1",children:"Estado"}),e.jsx("select",{value:c.status,onChange:t=>m({...c,status:t.target.value}),className:"w-full p-3 bg-slate-50 border-none rounded-xl text-sm font-medium","aria-label":"Estado",children:Object.values(g).map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase ml-1",children:"Propiedad"}),e.jsxs("select",{value:c.ownership,onChange:t=>m({...c,ownership:t.target.value}),className:"w-full p-3 bg-slate-50 border-none rounded-xl text-sm font-medium",disabled:!j,"aria-label":"Propiedad",children:[e.jsx("option",{value:"Propio",children:"Propio"}),e.jsx("option",{value:"Alquilado",children:"Alquilado"}),e.jsx("option",{value:"Leasing",children:"Leasing"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase ml-1",children:"Código de Barras"}),e.jsx("input",{type:"text",value:c.barcodeId,onChange:t=>m({...c,barcodeId:t.target.value}),className:`w-full p-3 bg-slate-50 border-none rounded-xl text-sm font-medium ${j?"":"opacity-50"}`,disabled:!j,"aria-label":"Código de Barras"})]}),e.jsxs("div",{className:"col-span-2 space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase ml-1",children:"Ubicación"}),e.jsx("input",{type:"text",value:c.location,onChange:t=>m({...c,location:t.target.value}),className:"w-full p-3 bg-slate-50 border-none rounded-xl text-sm font-medium"})]}),e.jsxs("div",{className:"col-span-2 space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase ml-1",children:"Responsable"}),e.jsxs("select",{value:c.responsible,onChange:t=>m({...c,responsible:t.target.value}),className:"w-full p-3 bg-slate-50 border-none rounded-xl text-sm font-medium",children:[e.jsx("option",{value:"",children:"Seleccionar Responsable"}),O.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))]})]}),e.jsxs("div",{className:"col-span-2 space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase ml-1",children:"Descripción"}),e.jsx("textarea",{value:c.description,onChange:t=>m({...c,description:t.target.value}),className:"w-full p-3 bg-slate-50 border-none rounded-xl text-sm font-medium h-24"})]})]})]}):e.jsxs("div",{className:"bg-slate-900 text-white p-6 rounded-[2.5rem] shadow-xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-orange-500 rounded-full blur-[60px] opacity-20 -mr-10 -mt-10 pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest bg-slate-800/50 px-2 py-1 rounded mb-3 inline-block backdrop-blur-sm",children:i.internalId}),e.jsx("h2",{className:"text-3xl font-black mb-1 leading-tight",children:i.name})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/10 backdrop-blur-md flex items-center justify-center border border-white/10",children:e.jsx(k,{className:"text-orange-500",size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Ubicación"}),e.jsx("p",{className:"text-sm font-bold text-slate-200",children:i.location})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:`px-3 py-1.5 rounded-xl border flex items-center gap-2 ${i.status===g.OPERATIONAL?"bg-green-500/20 border-green-500/30 text-green-400":i.status===g.IN_MAINTENANCE?"bg-orange-500/20 border-orange-500/30 text-orange-400":"bg-red-500/20 border-red-500/30 text-red-400"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${i.status===g.OPERATIONAL?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-xs font-bold uppercase",children:i.status})]})})]})]})})]}):e.jsxs("div",{className:"bg-[#F8F9FA] min-h-screen pb-24 font-sans",children:[e.jsxs("div",{className:"bg-white p-6 sticky top-0 z-10 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>Q("/assets"),className:"p-2 hover:bg-slate-100 rounded-full transition-colors text-slate-400",children:e.jsx(z,{size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800 tracking-tight",children:"Mobiliario"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Gestión de Muebles y Útiles"})]})]}),L&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>M(!0),className:"w-12 h-12 bg-white border border-slate-200 rounded-2xl flex items-center justify-center text-slate-600 shadow-sm hover:bg-slate-50 hover:text-blue-600 transition-colors","aria-label":"Importar Activos",title:"Importar Activos",children:e.jsx(Ce,{size:24})}),e.jsx("button",{onClick:()=>P(!0),className:"w-12 h-12 bg-orange-500 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-orange-200 hover:scale-105 active:scale-95 transition-all",children:e.jsx(Ee,{size:28})})]})]}),e.jsx("div",{className:"px-6 py-2",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar por nombre, ID o ubicación...",value:F,onChange:t=>ee(t.target.value),className:"w-full p-4 pl-12 bg-white border-none rounded-2xl text-sm font-medium shadow-sm focus:ring-2 focus:ring-orange-100 transition-all text-slate-600"}),e.jsx(Oe,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20})]})}),e.jsx("div",{className:"px-6 py-2 flex gap-2 overflow-x-auto no-scrollbar",children:[{id:"all",label:"Todos"},{id:"owned",label:"Propios"},{id:"rented",label:"Alquilados"}].map(t=>e.jsx("button",{onClick:()=>te(t.id),className:`px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-colors ${C===t.id?"bg-slate-800 text-white":"bg-white text-slate-500"}`,children:t.label},t.id))}),e.jsxs("div",{className:"p-6 space-y-4",children:[J?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400 font-medium animate-pulse",children:"Cargando mobiliario..."})]}):W.length>0?W.map(t=>e.jsx(Be,{asset:t,onClick:w,getStatusColor:xe},t.id)):e.jsxs("div",{className:"text-center py-12 opacity-50",children:[e.jsx(Ae,{size:48,className:"mx-auto text-slate-300 mb-3"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"No se encontró mobiliario"})]}),e.jsx(Se,{isOpen:Z,onClose:()=>M(!1),onSuccess:()=>{B()},initialAssetType:"Mobiliario",forceAssetType:!0})]})]})};export{Ct as default};
