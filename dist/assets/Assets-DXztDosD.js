import{u as f,r,s as n,d as g,e as b,M as v,f as j,B as N,j as e,P as w}from"./index-DOan4Mna.js";import{A as y}from"./AssetImportModal-BwZNqDyz.js";import{C}from"./chevron-right-CYe8aAd4.js";import"./triangle-alert-Cdjg_spt.js";import"./upload-BG14C8-b.js";import"./loader-circle-DWsTb9p_.js";const R=()=>{const c=f(),[s,d]=r.useState({vehicles:0,machinery:0,it:0,installations:0,infrastructure:0}),[l,x]=r.useState(!0),[m,o]=r.useState(!1);r.useEffect(()=>{i()},[]);const i=async()=>{try{const{data:t}=await n.from("assets").select("type"),{count:h}=await n.from("infrastructures").select("*",{count:"exact",head:!0});if(t){const p={vehicles:t.filter(a=>a.type==="Rodados").length,machinery:t.filter(a=>a.type==="Maquinaria").length,it:t.filter(a=>a.type==="Equipos de Informática").length,installations:t.filter(a=>a.type==="Instalaciones en infraestructuras").length,infrastructure:h||0};d(p)}}catch(t){console.error("Error fetching counts:",t)}finally{x(!1)}},u=[{id:"vehicles",name:"Rodados",icon:g,path:"/assets/vehicles",count:s.vehicles,color:"text-blue-600",bgColor:"bg-blue-50"},{id:"machinery",name:"Maquinaria",icon:b,path:"/assets/machinery",count:s.machinery,color:"text-orange-600",bgColor:"bg-orange-50"},{id:"it",name:"Informática",icon:v,path:"/assets/it",count:s.it,color:"text-purple-600",bgColor:"bg-purple-50"},{id:"installations",name:"Instalaciones",icon:j,path:"/assets/installations",count:s.installations,color:"text-green-600",bgColor:"bg-green-50"},{id:"infrastructure",name:"Infraestructura",icon:N,path:"/assets/infrastructure",count:s.infrastructure,color:"text-slate-600",bgColor:"bg-slate-50"}];return e.jsxs("div",{className:"p-6 space-y-8 bg-[#F8F9FA] min-h-screen",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h1",{className:"text-3xl font-black text-slate-800 tracking-tight",children:"Mis Activos"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Panel general de gestión y categorías"})]}),e.jsxs("button",{onClick:()=>o(!0),className:"group bg-white border border-slate-200 hover:border-blue-400 hover:bg-blue-50 text-slate-600 hover:text-blue-600 px-6 py-3 rounded-[1.5rem] font-bold shadow-sm hover:shadow-md transition-all flex items-center gap-2",children:[e.jsx(w,{size:20,className:"text-slate-400 group-hover:text-blue-500 transition-colors"}),"Importar Activos"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(t=>e.jsxs("div",{onClick:()=>c(t.path),className:"bg-white p-6 rounded-[2.5rem] shadow-sm border border-slate-100 flex flex-col justify-between hover:shadow-xl hover:border-orange-200 transition-all cursor-pointer group active:scale-95",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsx("div",{className:`w-14 h-14 ${t.bgColor} rounded-2xl flex items-center justify-center transition-transform group-hover:scale-110 duration-300`,children:e.jsx(t.icon,{className:`${t.color}`,size:28})}),e.jsx("div",{className:"h-10 w-10 bg-slate-50 rounded-full flex items-center justify-center text-slate-300 group-hover:bg-orange-50 group-hover:text-orange-500 transition-colors",children:e.jsx(C,{size:20})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-1",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-black text-slate-900",children:l?"...":t.count}),e.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Unidades"})]})]})]},t.id))}),e.jsxs("div",{className:"bg-slate-900 rounded-[3rem] p-8 text-white relative overflow-hidden shadow-2xl",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-orange-500 rounded-full blur-[100px] opacity-20 -mr-20 -mt-20"}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Resumen Operativo"}),e.jsx("p",{className:"text-slate-400 text-sm max-w-md",children:"Control total de flota, maquinaria y activos tecnológicos en tiempo real."})]}),e.jsxs("div",{className:"flex gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-black text-orange-500",children:l?"...":s.vehicles+s.machinery+s.it+s.installations+s.infrastructure}),e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Total Activos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-black text-green-500",children:"92%"}),e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Operatividad"})]})]})]})]}),e.jsx(y,{isOpen:m,onClose:()=>o(!1),onSuccess:()=>{i()}})]})};export{R as default};
