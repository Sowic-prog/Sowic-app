import{c as xe,u as me,r as c,R as ue,j as e,X as B,i as he,b as k,h as fe,s as j,T as be,n as ge,W as pe,g as je}from"./index-DOan4Mna.js";import{S as J}from"./shield-alert-CVltm9hy.js";import{M as E}from"./map-pin-B9vmRWEB.js";import{I as we}from"./info-CR1Vawrt.js";import{E as ye}from"./external-link-CZHDXgtl.js";import{C as T}from"./chevron-left-dnm8qLMD.js";import{S as Ne}from"./save-CT3IA3EO.js";import{C as De}from"./circle-alert-eSyUdlLx.js";import{C as ve}from"./chevron-right-CYe8aAd4.js";import{B as ke}from"./bell-D2meMWZO.js";import{C as Me}from"./calendar-clock-C3tEC3IQ.js";import{T as Ce}from"./triangle-alert-Cdjg_spt.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],$e=xe("repeat",Se),Le=()=>{const w=me(),[f,z]=c.useState("month"),[m,M]=c.useState("day"),[o,y]=c.useState(new Date),[d,I]=c.useState(new Date),[C,G]=c.useState([]),[l,u]=c.useState(null),[X,N]=c.useState(!1),[K,b]=c.useState(!1),[x,h]=c.useState({title:"",date:new Date().toISOString().split("T")[0],time:"09:00",frequency:"No se repite",notes:""}),[F,Q]=c.useState([]),[_,Z]=c.useState([]),[R,ee]=c.useState([]),[O,te]=c.useState([]),[S,se]=c.useState([]),[Ae,Y]=c.useState(!0);ue.useEffect(()=>{(async()=>{Y(!0);try{const{data:t}=await j.from("work_orders").select("*");t&&Q(t);const{data:a}=await j.from("asset_allocations").select("*, asset:assets(name), project:projects(name)");a&&Z(a);const{data:n}=await j.from("asset_transfers").select("*, asset:assets(name)");n&&ee(n);const{data:r}=await j.from("maintenance_plans").select("*");r&&te(r);const{data:i}=await j.from("assets").select("id, name, internal_id, expirations, incidents");i&&se(i)}catch(t){console.error("Error fetching calendar data:",t)}finally{Y(!1)}})()},[]);const D=c.useMemo(()=>{const s=[];return _.forEach(t=>{var a,n,r,i;t.start_date&&(s.push({id:`${t.id}-start`,date:new Date(t.start_date+"T00:00:00"),title:`Inicio Asignación: ${((a=t.asset)==null?void 0:a.name)||t.asset_name||"Desconocido"}`,subtitle:((n=t.project)==null?void 0:n.name)||t.project_name||"Sin Proyecto",type:"Allocation",status:"Inicio",assetId:t.asset_id,notes:"Inicio de asignación de activo al proyecto."}),t.end_date&&s.push({id:`${t.id}-end`,date:new Date(t.end_date+"T00:00:00"),title:`Fin Asignación: ${((r=t.asset)==null?void 0:r.name)||t.asset_name||"Desconocido"}`,subtitle:((i=t.project)==null?void 0:i.name)||t.project_name||"Sin Proyecto",type:"Allocation",status:"Fin",assetId:t.asset_id,notes:"Fin de asignación de activo al proyecto."}))}),F.forEach(t=>{t.date_start&&s.push({id:t.id,date:new Date(t.date_start),title:`OT: ${t.title}`,subtitle:t.asset_name||"General",type:"WorkOrder",priority:t.priority,status:t.status,assetId:t.asset_id,notes:t.description})}),R.forEach(t=>{var a;t.transfer_date&&s.push({id:t.id,date:new Date(t.transfer_date+"T00:00:00"),title:`Traslado: ${((a=t.asset)==null?void 0:a.name)||"Activo"}`,subtitle:`${t.from_location} -> ${t.to_location}`,type:"Transfer",status:t.status,notes:`Lectura: ${t.meter_reading||"N/A"}`})}),C.forEach(t=>{const a=new Date(t.date+"T00:00:00");let n=1;t.frequency==="Semanal"&&(n=52),t.frequency==="Mensual"&&(n=12),t.frequency==="Anual"&&(n=2);for(let r=0;r<n;r++){const i=new Date(a);t.frequency==="Semanal"&&i.setDate(a.getDate()+r*7),t.frequency==="Mensual"&&i.setMonth(a.getMonth()+r),t.frequency==="Anual"&&i.setFullYear(a.getFullYear()+r),s.push({id:`${t.id}-${r}`,date:i,title:t.title,subtitle:t.time+(t.frequency!=="No se repite"?` (${t.frequency})`:""),type:"Reminder",priority:"Alta",notes:t.notes})}}),O.forEach(t=>{t.events&&Array.isArray(t.events)&&t.events.forEach(a=>{a.estimatedDate&&s.push({id:`evt-${a.id||Math.random()}`,date:new Date(a.estimatedDate+"T00:00:00"),title:`Planificado: ${a.title}`,subtitle:t.asset_name||"Activo",type:"MaintenanceEvent",status:a.status,assetId:t.asset_id,notes:"Tareas definidas."})})}),S.forEach(t=>{t.expirations&&Array.isArray(t.expirations)&&t.expirations.forEach(a=>{a.expirationDate&&s.push({id:`exp-${t.id}-${a.id||Math.random()}`,date:new Date(a.expirationDate+"T00:00:00"),title:`Vence: ${a.type}`,subtitle:t.name,type:"Expiration",status:"Documentación",assetId:t.id,notes:`Notas: ${a.notes||"Renovar."}`})}),t.incidents&&Array.isArray(t.incidents)&&t.incidents.forEach(a=>{a.date&&s.push({id:`inc-${t.id}-${a.id||Math.random()}`,date:new Date(a.date+"T00:00:00"),title:`Siniestro: ${a.damageLevel}`,subtitle:t.name,type:"Incident",status:a.status,assetId:t.id,priority:"Crítica",notes:a.description})})}),s.sort((t,a)=>t.date.getTime()-a.date.getTime())},[C,F,_,R,O,S]),P=c.useMemo(()=>{const s=new Date;s.setHours(0,0,0,0);const t=new Date;t.setDate(s.getDate()+90),t.setHours(23,59,59,999);const a={};return S.forEach(n=>{n.expirations&&Array.isArray(n.expirations)&&n.expirations.forEach(r=>{const i=new Date(r.expirationDate+"T00:00:00");if(i>=s&&i<=t){a[r.type]||(a[r.type]=[]);const p=Math.abs(i.getTime()-s.getTime()),U=Math.ceil(p/(1e3*60*60*24));a[r.type].push({...r,assetName:n.name,internalId:n.internalId,assetId:n.id,daysRemaining:U,isUrgent:U<=30})}})}),Object.keys(a).forEach(n=>{a[n].sort((r,i)=>r.daysRemaining-i.daysRemaining)}),a},[]),$=Object.values(P).flat().length,W=(s,t)=>s.getDate()===t.getDate()&&s.getMonth()===t.getMonth()&&s.getFullYear()===t.getFullYear(),V=(s,t)=>{const a=new Date(s.getFullYear(),s.getMonth(),s.getDate()).getTime(),n=new Date(t.date.getFullYear(),t.date.getMonth(),t.date.getDate()).getTime();if(t.endDate){const r=new Date(t.endDate.getFullYear(),t.endDate.getMonth(),t.endDate.getDate()).getTime();return a>=n&&a<=r}return a===n},ae=(s,t)=>{const a=new Date(t);a.setDate(t.getDate()-t.getDay()),a.setHours(0,0,0,0);const n=new Date(a);return n.setDate(a.getDate()+6),n.setHours(23,59,59,999),s.getTime()>=a.getTime()&&s.getTime()<=n.getTime()},A=(s,t)=>s.getMonth()===t.getMonth()&&s.getFullYear()===t.getFullYear(),ne=()=>{switch(m){case"day":return D.filter(s=>V(d,s));case"week":return D.filter(s=>{if(s.endDate){const t=new Date(d);t.setDate(d.getDate()-d.getDay());const a=new Date(t);return a.setDate(t.getDate()+6),s.date<=a&&(s.endDate||s.date)>=t}return ae(s.date,d)});case"month":return D.filter(s=>s.endDate?A(s.date,d)||A(s.endDate,d):A(s.date,d));default:return[]}},re=s=>new Date(s.getFullYear(),s.getMonth()+1,0).getDate(),le=s=>new Date(s.getFullYear(),s.getMonth(),1).getDay(),v=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],L=["D","L","M","M","J","V","S"],ie=()=>{if(f==="month")y(new Date(o.getFullYear(),o.getMonth()-1,1));else{const s=new Date(o);s.setDate(o.getDate()-7),y(s)}},oe=()=>{if(f==="month")y(new Date(o.getFullYear(),o.getMonth()+1,1));else{const s=new Date(o);s.setDate(o.getDate()+7),y(s)}},de=()=>{if(!x.title){alert("Por favor escriba un título.");return}const s={id:Math.random().toString(36).substr(2,9),title:x.title,date:x.date,time:x.time,frequency:x.frequency,notes:x.notes};G([...C,s]),N(!1),h({title:"",date:new Date().toISOString().split("T")[0],time:"09:00",frequency:"No se repite",notes:""})},g=s=>{switch(s.type){case"Incident":return{icon:e.jsx(Ce,{size:18}),bg:"bg-red-500",border:"border-red-200",text:"text-white",accent:"bg-red-700"};case"Expiration":return{icon:e.jsx(je,{size:18}),bg:"bg-teal-50",border:"border-teal-100",text:"text-teal-600",accent:"bg-teal-500"};case"Maintenance":return{icon:e.jsx(pe,{size:18}),bg:"bg-slate-50",border:"border-slate-200",text:"text-slate-600",accent:"bg-slate-400"};case"MaintenanceEvent":return{icon:e.jsx(Me,{size:18}),bg:"bg-indigo-50",border:"border-indigo-100",text:"text-indigo-600",accent:"bg-indigo-500"};case"Reminder":return{icon:e.jsx(ke,{size:18}),bg:"bg-purple-50",border:"border-purple-100",text:"text-purple-600",accent:"bg-purple-500"};case"WorkOrder":return{icon:e.jsx(ge,{size:18}),bg:"bg-blue-50",border:"border-blue-100",text:"text-blue-600",accent:"bg-blue-500"};case"Transfer":return{icon:e.jsx(be,{size:18}),bg:"bg-green-50",border:"border-green-100",text:"text-green-600",accent:"bg-green-500"};default:return{icon:e.jsx(E,{size:18}),bg:"bg-orange-50",border:"border-orange-100",text:"text-orange-600",accent:"bg-orange-500"}}},q=s=>({Allocation:"Asignación",WorkOrder:"Orden de Trabajo",Transfer:"Traslado",Reminder:"Recordatorio",Maintenance:"Mantenimiento (Est.)",MaintenanceEvent:"Plan Mantenimiento",Expiration:"Vencimiento",Incident:"Siniestro"})[s]||s,H=ne(),ce=()=>{if(m==="day")return`${d.getDate()} de ${v[d.getMonth()]}`;if(m==="week"){const s=new Date(d);s.setDate(d.getDate()-d.getDay());const t=new Date(s);return t.setDate(s.getDate()+6),`Del ${s.getDate()}/${s.getMonth()+1} al ${t.getDate()}/${t.getMonth()+1}`}return v[d.getMonth()]+" "+d.getFullYear()};return e.jsxs("div",{className:"bg-[#F8F9FA] min-h-screen pb-24 font-sans relative",children:[K&&e.jsx("div",{className:"fixed inset-0 z-[70] bg-slate-900/40 backdrop-blur-sm flex items-end md:items-center justify-center animate-in fade-in duration-300 p-0 md:p-6",children:e.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-t-[2.5rem] md:rounded-[2.5rem] h-[85vh] md:h-auto md:max-h-[85vh] flex flex-col shadow-2xl relative animate-in slide-in-from-bottom-20 duration-500",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(J,{size:24,className:"text-red-500"})," Vencimientos Próximos"]}),e.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider mt-1",children:"Próximos 90 Días"})]}),e.jsx("button",{onClick:()=>b(!1),"aria-label":"Cerrar resumen",className:"w-10 h-10 bg-slate-50 rounded-full flex items-center justify-center text-slate-400 hover:bg-slate-100 hover:text-slate-600 transition-colors",children:e.jsx(B,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-8 no-scrollbar",children:$===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-50 rounded-full flex items-center justify-center mb-4",children:e.jsx(he,{size:32,className:"text-green-500"})}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Todo en orden."}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"No hay vencimientos de documentación en los próximos 3 meses."})]}):Object.entries(P).map(([s,t])=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-300"})," ",s," (",t.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:t.map((a,n)=>e.jsxs("div",{onClick:()=>{b(!1),w("/assets",{state:{targetAssetId:a.assetId}})},className:`p-4 rounded-2xl border flex justify-between items-center cursor-pointer transition-all hover:shadow-md active:scale-[0.98] ${a.isUrgent?"bg-red-50 border-red-100":"bg-white border-slate-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:`w-12 h-12 rounded-xl flex flex-col items-center justify-center shrink-0 border ${a.isUrgent?"bg-white border-red-100":"bg-slate-50 border-slate-100"}`,children:[e.jsx("span",{className:`text-lg font-bold ${a.isUrgent?"text-red-600":"text-slate-700"}`,children:a.daysRemaining}),e.jsx("span",{className:"text-[8px] font-bold text-slate-400 uppercase",children:"Días"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:a.assetName}),e.jsxs("p",{className:"text-[10px] text-slate-500 font-medium uppercase tracking-wide",children:[a.internalId," • ",a.notes]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded-lg ${a.isUrgent?"bg-red-100 text-red-600":"bg-slate-100 text-slate-500"}`,children:a.expirationDate})})]},n))})]},s))}),e.jsx("div",{className:"p-4 border-t border-slate-100 bg-slate-50 rounded-b-[2.5rem]",children:e.jsx("button",{onClick:()=>b(!1),className:"w-full py-3 bg-white border border-slate-200 text-slate-600 rounded-xl font-bold text-sm shadow-sm",children:"Cerrar Reporte"})})]})}),l&&e.jsx("div",{className:"fixed inset-0 z-[60] bg-slate-900/40 backdrop-blur-sm flex items-end justify-center animate-in fade-in duration-300",onClick:()=>u(null),children:e.jsxs("div",{className:"bg-white w-full max-w-lg rounded-t-[3rem] p-8 animate-in slide-in-from-bottom-40 duration-500 shadow-2xl relative",onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"w-12 h-1.5 bg-slate-100 rounded-full mx-auto mb-6"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 ${g(l).bg} ${g(l).text} rounded-2xl flex items-center justify-center shadow-sm`,children:g(l).icon}),e.jsxs("div",{children:[e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest ${g(l).text}`,children:q(l.type)}),e.jsx("h2",{className:"text-xl font-bold text-slate-800 leading-tight",children:l.title})]})]}),e.jsx("button",{onClick:()=>u(null),"aria-label":"Cerrar detalle",className:"p-2 bg-slate-50 text-slate-400 rounded-full hover:bg-slate-100",children:e.jsx(B,{size:20})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100/50",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase block mb-1",children:"Fecha"}),e.jsxs("p",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(k,{size:14,className:"text-slate-400"}),l.date.toLocaleDateString("es-ES")]})]}),l.endDate&&e.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100/50",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase block mb-1",children:"Finaliza"}),e.jsxs("p",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(k,{size:14,className:"text-slate-400"}),l.endDate.toLocaleDateString("es-ES")]})]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100/50 col-span-2",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase block mb-1",children:"Entidad Relacionada"}),e.jsxs("p",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(E,{size:14,className:"text-orange-500"}),l.subtitle]})]})]}),e.jsxs("div",{className:"p-6 bg-slate-50 rounded-3xl border border-slate-100",children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-800 uppercase tracking-widest flex items-center gap-2 mb-3",children:[e.jsx(we,{size:14,className:"text-slate-400"})," Detalle"]}),e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed font-medium",children:l.notes||"Sin información adicional disponible."})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{onClick:()=>u(null),className:"flex-1 py-4 bg-slate-100 text-slate-600 rounded-2xl font-bold text-sm hover:bg-slate-200 transition-colors",children:"Cerrar"}),l.type==="WorkOrder"&&e.jsxs("button",{onClick:()=>{u(null),w(`/maintenance/ot/${l.id}`)},className:"flex-1 py-4 bg-blue-600 text-white rounded-2xl font-bold text-sm shadow-xl shadow-blue-100 flex items-center justify-center gap-2",children:[e.jsx(ye,{size:18})," Ver OT"]}),(l.type==="Allocation"||l.type==="Maintenance"||l.type==="Expiration"||l.type==="Incident"||l.type==="MaintenanceEvent")&&l.assetId&&e.jsxs("button",{onClick:()=>{u(null),w("/assets",{state:{targetAssetId:l.assetId}})},className:"flex-1 py-4 bg-orange-500 text-white rounded-2xl font-bold text-sm shadow-xl shadow-orange-100 flex items-center justify-center gap-2",children:[e.jsx(E,{size:18})," Ver Activo"]})]})]})]})}),X&&e.jsxs("div",{className:"fixed inset-0 z-50 bg-[#F8F9FA] flex flex-col animate-in slide-in-from-bottom-10 duration-300",children:[e.jsxs("div",{className:"bg-white p-4 shadow-sm flex items-center justify-between sticky top-0 z-10",children:[e.jsx("button",{onClick:()=>N(!1),"aria-label":"Volver",className:"text-slate-600",children:e.jsx(T,{size:24})}),e.jsx("h1",{className:"font-bold text-lg text-slate-800",children:"Nuevo Recordatorio"}),e.jsx("button",{onClick:()=>N(!1),className:"text-orange-500 font-bold text-sm",children:"Cancelar"})]}),e.jsxs("div",{className:"p-6 space-y-8 overflow-y-auto pb-24",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-800 uppercase tracking-wide",children:"Título del Evento"}),e.jsx("input",{type:"text",value:x.title,onChange:s=>h({...x,title:s.target.value}),placeholder:"Ej. Reunión de coordinación, Pago de servicios...",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl focus:outline-none focus:border-orange-500 font-medium text-slate-700 shadow-sm"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-bold text-slate-800 uppercase tracking-wide",children:"Frecuencia"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["No se repite","Semanal","Mensual","Anual"].map(s=>e.jsxs("button",{onClick:()=>h({...x,frequency:s}),className:`flex items-center justify-center px-4 py-3 rounded-xl border font-bold text-xs transition-all flex-1 ${x.frequency===s?"bg-purple-500 border-purple-500 text-white shadow-md":"bg-white border-slate-200 text-slate-500"}`,children:[s==="Semanal"&&e.jsx($e,{size:14,className:"mr-1"}),s==="Anual"&&e.jsx(k,{size:14,className:"mr-1"}),s]},s))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-800 uppercase tracking-wide",children:"Fecha"}),e.jsx("input",{type:"date",value:x.date,onChange:s=>h({...x,date:s.target.value}),"aria-label":"Fecha del evento",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl focus:outline-none focus:border-orange-500 text-sm font-medium text-slate-700"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-800 uppercase tracking-wide",children:"Hora"}),e.jsx("input",{type:"time",value:x.time,onChange:s=>h({...x,time:s.target.value}),"aria-label":"Hora del evento",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl focus:outline-none focus:border-orange-500 text-sm font-medium text-slate-700"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-800 uppercase tracking-wide",children:"Notas / Detalles"}),e.jsx("textarea",{placeholder:"Información adicional...",value:x.notes,onChange:s=>h({...x,notes:s.target.value}),className:"w-full p-4 bg-white border border-slate-200 rounded-2xl focus:outline-none focus:border-orange-500 text-sm min-h-[120px] shadow-sm resize-none"})]}),e.jsxs("button",{onClick:de,className:"w-full bg-slate-800 text-white py-4 rounded-2xl font-bold shadow-xl shadow-slate-200 flex items-center justify-center gap-2 active:scale-95 transition-transform",children:[e.jsx(Ne,{size:20})," Guardar Recordatorio"]})]})]}),e.jsxs("div",{className:"bg-white p-4 sticky top-0 z-10 shadow-sm flex items-center justify-between",children:[e.jsx("button",{onClick:()=>w(-1),"aria-label":"Volver",className:"text-slate-600 p-2",children:e.jsx(T,{size:24})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h1",{className:"font-bold text-lg text-slate-800",children:"Calendario"}),e.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:[v[o.getMonth()]," ",o.getFullYear()]})]}),e.jsxs("button",{onClick:()=>b(!0),className:"relative p-2 text-slate-600 bg-slate-50 rounded-full hover:bg-slate-100 transition-colors",children:[e.jsx(De,{size:24}),$>0&&e.jsx("span",{className:"absolute top-0 right-0 w-4 h-4 bg-red-500 text-white text-[9px] font-bold flex items-center justify-center rounded-full border-2 border-white",children:$})]})]}),e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsxs("div",{className:"flex bg-slate-200 p-1 rounded-2xl flex-1",children:[e.jsx("button",{onClick:()=>z("month"),className:`flex-1 py-2 rounded-xl text-xs font-bold transition-all flex items-center justify-center gap-2 ${f==="month"?"bg-white text-slate-800 shadow-sm":"text-slate-50"}`,children:"Mes"}),e.jsx("button",{onClick:()=>z("week"),className:`flex-1 py-2 rounded-xl text-xs font-bold transition-all flex items-center justify-center gap-2 ${f==="week"?"bg-white text-slate-800 shadow-sm":"text-slate-50"}`,children:"Semana"})]}),e.jsxs("button",{onClick:()=>b(!0),className:"bg-red-50 text-red-600 px-3 rounded-2xl text-[10px] font-bold border border-red-100 flex items-center gap-1 hover:bg-red-100 transition-colors whitespace-nowrap",children:[e.jsx(J,{size:14})," Vencimientos"]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-[2.5rem] shadow-sm border border-slate-50 mb-8 overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"font-bold text-slate-800 text-lg",children:[v[o.getMonth()]," ",o.getFullYear()]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:ie,"aria-label":"Anterior",className:"w-8 h-8 rounded-full bg-slate-50 flex items-center justify-center text-slate-600",children:e.jsx(T,{size:18})}),e.jsx("button",{onClick:oe,"aria-label":"Siguiente",className:"w-8 h-8 rounded-full bg-slate-50 flex items-center justify-center text-slate-600",children:e.jsx(ve,{size:18})})]})]}),f==="month"?e.jsxs("div",{className:"grid grid-cols-7 gap-y-2 justify-items-center",children:[L.map((s,t)=>e.jsx("span",{className:"text-xs font-bold text-slate-400 mb-2",children:s},t)),Array.from({length:le(o)}).map((s,t)=>e.jsx("div",{className:"h-10 w-10"},`empty-${t}`)),Array.from({length:re(o)}).map((s,t)=>{const a=t+1,n=new Date(o.getFullYear(),o.getMonth(),a),r=W(n,d),i=D.filter(p=>V(n,p));return e.jsxs("button",{onClick:()=>I(n),className:`h-10 w-10 rounded-full flex flex-col items-center justify-center relative ${r?"bg-orange-500 text-white shadow-md scale-110":"text-slate-700"}`,children:[e.jsx("span",{className:"text-sm font-medium",children:a}),i.length>0&&!r&&e.jsx("span",{className:`w-1.5 h-1.5 rounded-full absolute bottom-1 ${i.some(p=>p.type==="Incident")?"bg-red-500":"bg-orange-400"}`})]},a)})]}):e.jsx("div",{className:"flex gap-2",children:Array.from({length:7}).map((s,t)=>{const a=new Date(o);a.setDate(a.getDate()-a.getDay()+t);const n=W(a,d);return e.jsxs("button",{onClick:()=>I(a),className:`flex-1 flex flex-col items-center py-4 rounded-2xl transition-all ${n?"bg-orange-500 text-white shadow-xl scale-105":"bg-white hover:bg-slate-50"}`,children:[e.jsx("span",{className:`text-[10px] font-bold uppercase mb-2 ${n?"text-white/70":"text-slate-400"}`,children:L[t]}),e.jsx("span",{className:"text-lg font-bold",children:a.getDate()})]},t)})})]}),e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-5 duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 text-xl",children:m==="day"?"Agenda del Día":m==="week"?"Agenda Semanal":"Resumen Mensual"}),e.jsx("p",{className:"text-sm text-slate-400 font-medium",children:ce()})]}),e.jsxs("div",{className:"flex bg-slate-200 p-1 rounded-xl w-full md:w-auto",children:[e.jsx("button",{onClick:()=>M("day"),className:`flex-1 px-4 py-1.5 rounded-lg text-[10px] font-bold transition-all ${m==="day"?"bg-white text-slate-800 shadow-sm":"text-slate-500"}`,children:"Día"}),e.jsx("button",{onClick:()=>M("week"),className:`flex-1 px-4 py-1.5 rounded-lg text-[10px] font-bold transition-all ${m==="week"?"bg-white text-slate-800 shadow-sm":"text-slate-500"}`,children:"Semana"}),e.jsx("button",{onClick:()=>M("month"),className:`flex-1 px-4 py-1.5 rounded-lg text-[10px] font-bold transition-all ${m==="month"?"bg-white text-slate-800 shadow-sm":"text-slate-500"}`,children:"Mes"})]})]}),e.jsxs("div",{className:"space-y-4",children:[H.map((s,t)=>{const a=g(s);return e.jsxs("div",{onClick:()=>u(s),className:`bg-white p-5 rounded-3xl shadow-sm border ${a.border} flex gap-4 relative overflow-hidden group transition-all cursor-pointer`,children:[e.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1.5 ${a.accent}`}),e.jsx("div",{className:`flex flex-col items-center justify-center w-12 h-12 ${a.bg} rounded-2xl ${a.text} shrink-0`,children:a.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"font-bold text-slate-800 text-sm truncate",children:s.title}),s.status&&e.jsx("span",{className:"text-[9px] font-bold px-2 py-0.5 rounded-full bg-slate-100 text-slate-500 uppercase",children:s.status})]}),e.jsx("p",{className:"text-xs text-slate-500 truncate mt-0.5",children:s.subtitle}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:`text-[8px] font-bold uppercase px-2 py-0.5 rounded-lg ${a.bg} ${a.text}`,children:q(s.type)}),m!=="day"&&e.jsxs("div",{className:"flex items-center gap-1 text-[9px] font-bold text-slate-400",children:[e.jsx(k,{size:10})," ",s.date.getDate(),"/",s.date.getMonth()+1]})]})]})]},t)}),H.length===0&&e.jsx("div",{className:"text-center py-12 bg-white/50 rounded-[2rem] border border-dashed border-slate-200",children:e.jsx("p",{className:"text-slate-400 font-bold text-sm",children:"Sin eventos para este periodo."})})]})]})]}),e.jsx("button",{onClick:()=>N(!0),"aria-label":"Agregar recordatorio",className:"fixed bottom-24 right-6 w-14 h-14 bg-orange-500 rounded-full flex items-center justify-center text-white shadow-2xl z-40 border-4 border-white",children:e.jsx(fe,{size:28})})]})};export{Le as default};
